<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ child.name }}'s Entries</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>


<body>
    <nav>
        <div>
            <div>
                <div>
                    <div>
                        <h1>ParentPlanner</h1>
                        <p>{{ child.name }}'s entries</p>
                    </div>
                </div>
                <div>
                    <a href="{% url 'dashboard' %}">Dashboard
                    </a>
                    <a href="{% url 'logout' %}">Logout
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <div>
        {% if messages %}
            {% for message in messages %}
                <div>
                    <div>
                        {% if message.tags == 'success' %}
                        {% elif message.tags == 'error' %}
                        {% else %}
                        {% endif %}
                        {{ message }}
                    </div>
                </div>
            {% endfor %}
        {% endif %}

        <div>
            <div>
                <div>
                    <div {{ child.color }};>
                        {{ child.name|first }}
                    </div>
                    <div>
                        <h2>{{ child.name }}'s Entries</h2>
                        <p>{{ entries.count }} total entries</p>
                    </div>
                </div>
                <a href="{% url 'add_entry' %}">Add Entry
                </a>
            </div>
        </div>

        <div>
            <div>
                <a href="?type=">All Entries</a>
                <a href="?type=note">Notes</a>
                <a href="?type=task">Tasks</a>
                <a href="?type=event">Events</a>
            </div>
        </div>
<!-- entries -->
        <div>
            <div>
                <h3>Entries</h3>
            </div>
            
            <div>
                {% if entries %}
                    <div>
                        {% for entry in entries %}
                            <div{{ entry.get_entry_type_color }};>
                                <div>
                                    <div>
                                        <div>
                                            <div{{ entry.get_entry_type_color }};>
                                            </div>
                                            <div>
                                                <h4>{{ entry.title }}</h4>
                                                <div>
                                                    <span>{{ entry.get_entry_type_display }}</span>
                                                    {% if entry.category %}
                                                        <span>{{ entry.category.name }}</span>
                                                    {% endif %}
                                                    <span>{{ entry.created_at|date:"M d, Y" }}</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {% if entry.description %}
                                            <p>{{ entry.description|truncatewords:20 }}</p>
                                        {% endif %}
                                        
                                        <div>
                                            {% if entry.entry_type == 'task' %}
                                                {% if entry.priority %}
                                                    <span>
                                                        {{ entry.get_priority_display }} Priority
                                                    </span>
                                                {% endif %}
                                                {% if entry.due_date %}
                                                    <span>Due: {{ entry.due_date|date:"M d, Y g:i A" }}
                                                    </span>
                                                {% endif %}
                                            {% elif entry.entry_type == 'event' %}
                                                {% if entry.start_time %}
                                                    <span>{{ entry.start_time|date:"M d, Y g:i A" }}
                                                    </span>
                                                {% endif %}
                                                {% if entry.location %}
                                                    <span>{{ entry.location }}
                                                    </span>
                                                {% endif %}
                                            {% endif %}
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <a href="{% url 'edit_entry' entry.id %}"></a>
                                        <a href="{% url 'delete_entry' entry.id %}" onclick="return confirm('Are you sure you want to delete this entry?')">
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div>
                        <h3>No entries yet</h3>
                        <p>Add your first entry to get started!</p>
                        <a href="{% url 'add_entry' %}">Add Entry</a>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</body>
</html>
